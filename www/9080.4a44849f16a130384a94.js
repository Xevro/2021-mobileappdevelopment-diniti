"use strict";(self.webpackChunkdiniti=self.webpackChunkdiniti||[]).push([[9080],{9080:(G,_,a)=>{a.r(_),a.d(_,{AdminProductDetailsPageModule:()=>V});var s=a(6274),m=a(4988),d=a(4683),g=a(4029),p=a(1855),h=a(4293),P=a(6733),t=a(7272),v=a(4071),f=a(3826),x=a(7046),Z=a(145),M=a(9388);function C(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).editProduct()}),t._UZ(1,"ion-icon",9),t.qZA()}}function T(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"ion-button",8),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).hideEditProduct()}),t._UZ(1,"ion-icon",10),t.qZA()}}function b(o,i){if(1&o&&(t.TgZ(0,"ion-buttons"),t.YNc(1,C,2,0,"ion-button",7),t.YNc(2,T,2,0,"ion-button",7),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.edit),t.xp6(1),t.Q6J("ngIf",e.edit)}}function I(o,i){1&o&&(t.TgZ(0,"p"),t._uU(1,"Product gegevens laden..."),t.qZA())}function O(o,i){1&o&&(t.TgZ(0,"p"),t._uU(1,"Kon de product gegevens niet laden."),t.qZA())}function A(o,i){if(1&o&&(t.TgZ(0,"div"),t.TgZ(1,"div",12),t._UZ(2,"img",13),t.qZA(),t.TgZ(3,"p"),t._uU(4,"Prijs/st: "),t.TgZ(5,"a"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.qZA(),t.TgZ(8,"p",14),t._uU(9,"Beschrijving"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.qZA(),t.qZA()),2&o){const e=t.oxw(2);t.xp6(2),t.s9C("src",null==e.product||null==e.product.image?null:e.product.image.url,t.LSH),t.s9C("alt",null==e.product||null==e.product.image?null:e.product.image.name),t.xp6(4),t.Oqu(t.xi3(7,4,null==e.product?null:e.product.price,"EUR")),t.xp6(5),t.Oqu(null==e.product?null:e.product.description)}}function D(o,i){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,I,2,0,"p",4),t.YNc(2,O,2,0,"p",4),t.YNc(3,A,12,7,"div",4),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",e.error&&!e.product),t.xp6(1),t.Q6J("ngIf",!e.loading&&e.product)}}function y(o,i){1&o&&(t.TgZ(0,"p"),t._uU(1,"Product gegevens laden..."),t.qZA())}function q(o,i){1&o&&(t.TgZ(0,"p"),t._uU(1,"Kon de product gegevens niet laden."),t.qZA())}function E(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"img",27),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).removeProductPicture()}),t.qZA()}}function U(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"img",28),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).changeProductPicture()}),t.qZA()}}function J(o,i){1&o&&(t.TgZ(0,"p",29),t._uU(1,"Afbeelding aan het uploaden..."),t.qZA())}function w(o,i){1&o&&(t.TgZ(0,"p",29),t._uU(1,"Afbeelding succesvol gewijzigd"),t.qZA())}function N(o,i){1&o&&(t.TgZ(0,"p",29),t._uU(1,"Er is een fout opgetreden bij het ophalen van de afbeelding"),t.qZA())}function R(o,i){if(1&o&&(t.TgZ(0,"div",30),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.errorMessage)}}function S(o,i){if(1&o&&(t.TgZ(0,"div",30),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.nameErrorMessage)}}function Y(o,i){if(1&o&&(t.TgZ(0,"div",30),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.priceErrorMessage)}}function Q(o,i){if(1&o&&(t.TgZ(0,"div",30),t.TgZ(1,"p"),t._uU(2),t.qZA(),t.qZA()),2&o){const e=t.oxw(3);t.xp6(2),t.Oqu(e.descriptionErrorMessage)}}function j(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div"),t.TgZ(1,"div",12),t.YNc(2,E,1,0,"img",15),t.YNc(3,U,1,0,"img",16),t._UZ(4,"img",13),t.qZA(),t.YNc(5,J,2,0,"p",17),t.YNc(6,w,2,0,"p",17),t.YNc(7,N,2,0,"p",17),t.YNc(8,R,3,1,"div",18),t.TgZ(9,"p",14),t._uU(10,"Product naam"),t.qZA(),t.YNc(11,S,3,1,"div",18),t.TgZ(12,"app-input-field",19),t.NdJ("onInputChange",function(r){return t.CHM(e),t.oxw(2).nameValueChanged(r)}),t.qZA(),t.TgZ(13,"p",14),t._uU(14,"Prijs"),t.qZA(),t.YNc(15,Y,3,1,"div",18),t.TgZ(16,"app-input-field",19),t.NdJ("onInputChange",function(r){return t.CHM(e),t.oxw(2).priceValueChanged(r)}),t.qZA(),t.TgZ(17,"p",14),t._uU(18,"Beschrijving"),t.qZA(),t.YNc(19,Q,3,1,"div",18),t.TgZ(20,"ion-textarea",20),t.NdJ("ionInput",function(r){return t.CHM(e),t.oxw(2).descriptionValueChanged(r)}),t.qZA(),t.TgZ(21,"ion-item",21),t.TgZ(22,"ion-label",22),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(25);return r.checked=!r.checked}),t._uU(23,"Zichtbaar voor klanten"),t.qZA(),t.TgZ(24,"ion-toggle",23,24),t.NdJ("ionChange",function(r){return t.CHM(e),t.oxw(2).changeVisibility(r)}),t.qZA(),t.qZA(),t.TgZ(26,"div",25),t.TgZ(27,"app-button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).SaveEditProduct()}),t.qZA(),t.qZA(),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(2),t.Q6J("ngIf",e.edit&&!e.loadingImage&&!e.imageError),t.xp6(1),t.Q6J("ngIf",e.edit&&!e.loadingImage&&!e.imageError),t.xp6(1),t.s9C("src",null==e.product||null==e.product.image?null:e.product.image.url,t.LSH),t.s9C("alt",null==e.product||null==e.product.image?null:e.product.image.name),t.xp6(1),t.Q6J("ngIf",e.loadingImage),t.xp6(1),t.Q6J("ngIf",!e.loadingImage&&e.uploadingImageDone),t.xp6(1),t.Q6J("ngIf",!e.loadingImage&&e.imageError),t.xp6(1),t.Q6J("ngIf",e.errorMessage),t.xp6(3),t.Q6J("ngIf",e.nameErrorMessage),t.xp6(1),t.Q6J("fieldType",e.fieldTypes.text)("placeholder","Naam")("name","name")("value",null==e.product?null:e.product.name),t.xp6(3),t.Q6J("ngIf",e.priceErrorMessage),t.xp6(1),t.Q6J("fieldType",e.fieldTypes.text)("placeholder","Prijs")("name","price")("value",null==e.product?null:e.product.price),t.xp6(3),t.Q6J("ngIf",e.descriptionErrorMessage),t.xp6(1),t.s9C("value",null==e.product?null:e.product.description),t.xp6(4),t.s9C("checked",null==e.updateProduct?null:e.updateProduct.visibility),t.xp6(3),t.Q6J("invertColor",!0)("buttonText","Sla wijzigingen op")}}function k(o,i){if(1&o&&(t.TgZ(0,"div",11),t.YNc(1,y,2,0,"p",4),t.YNc(2,q,2,0,"p",4),t.YNc(3,j,28,23,"div",4),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.loading),t.xp6(1),t.Q6J("ngIf",e.error&&!e.product),t.xp6(1),t.Q6J("ngIf",!e.loading&&e.product)}}const H=[{path:"",component:(()=>{class o{constructor(e,n,r,c,u,l){this.router=e,this.photoService=n,this.currencyPipe=r,this.activatedRoute=c,this.productsProxyService=u,this.authenticationService=l,this.updateProduct={},this.loading=!1,this.error=!1,this.edit=!1,this.role=h.u,this.fieldTypes=P.U,this.loadingImage=!1,this.uploadingImageDone=!1,this.nameErrorMessage=null,this.priceErrorMessage=null,this.descriptionErrorMessage=null,this.errorMessage=null,this.imageError=!1}ngOnInit(){this.getOrderData(),this.currentRole=this.authenticationService.getRole()}getOrderData(){this.loading=!0,this.productsProxyService.getProductByIdAction(this.activatedRoute.snapshot.params.productId).subscribe(e=>{var n;this.product=null==e?void 0:e.results[0],this.updateProduct.name=this.product.name,this.updateProduct.price=this.product.price,this.updateProduct.visibility=this.product.visibility,this.updateProduct.description=this.product.description,this.loading=!1,this.error=!(null===(n=this.product)||void 0===n?void 0:n.productId)},e=>{this.error=!0})}editProduct(){this.edit=!0}changeVisibility(e){this.product.visibility=e.target.checked,this.updateProduct.visibility=e.target.checked}SaveEditProduct(){this.updateProduct.name&&this.updateProduct.price&&this.updateProduct.description?(this.errorMessage="",this.imageResultData?(this.updateProduct.image={name:this.imageResultData.name,url:this.imageResultData.url,__type:"File"},this.productsProxyService.updateProductAction(this.updateProduct,this.product.objectId).subscribe(e=>{this.edit=!1,this.getOrderData()},e=>{this.errorMessage="Er is een onverwacht probleem opgetreden."})):this.productsProxyService.updateProductAction(this.updateProduct,this.product.objectId).subscribe(e=>{this.edit=!1,this.getOrderData()},e=>{this.errorMessage="Er is een onverwacht probleem opgetreden."})):this.errorMessage="Naam, beschrijving en of prijs zijn niet ingevuld"}uploadProductImage(){this.loadingImage=!0,this.photoService.capturePhoto().then(n=>(0,p.mG)(this,void 0,void 0,function*(){const r=yield this.photoService.toDataURL(n.webPath).then(c=>this.photoService.dataURItoBlob(c));this.productsProxyService.postImageAction(r).subscribe(c=>{this.imageResultData=c,this.loadingImage=!1,this.uploadingImageDone=!0,this.edit=!1,this.imageError=!1},c=>{this.uploadingImageDone=!1,this.imageError=!0})}))}changeProductPicture(){this.loadingImage=!0,this.photoService.capturePhoto().then(n=>(0,p.mG)(this,void 0,void 0,function*(){const r=yield this.photoService.toDataURL(n.webPath).then(c=>this.photoService.dataURItoBlob(c));this.productsProxyService.postImageAction(r).subscribe(c=>{this.productsProxyService.updateProductImageAction({image:{name:c.name,url:c.url,__type:"File"}},this.product.objectId).subscribe(l=>{this.loadingImage=!1,this.edit=!1,this.getOrderData()},l=>{location.reload(!0)})},c=>{location.reload(!0)})}))}removeProductPicture(){return(0,p.mG)(this,void 0,void 0,function*(){this.loadingImage=!0,this.imageResultData=null,this.uploadingImageDone=!1;const e=window.location,n=e.protocol+"//"+e.host+"/assets/icon/diniti-logo.png",r=yield this.photoService.toDataURL(n).then(c=>this.photoService.dataURItoBlob(c));this.productsProxyService.postImageAction(r).subscribe(c=>{this.productsProxyService.updateProductImageAction({image:{name:c.name,url:c.url,__type:"File"}},this.product.objectId).subscribe(l=>{this.loadingImage=!1,this.edit=!1,this.getOrderData()},l=>{location.reload(!0)})},c=>{location.reload(!0)})})}hideEditProduct(){this.edit=!1}nameValueChanged(e){0!==e.trim().length?(this.updateProduct.name=e.trim(),this.nameErrorMessage=""):this.nameErrorMessage="Naam kan niet leeg zijn"}priceValueChanged(e){try{this.updateProduct.price=Number(this.currencyPipe.transform(e,"EUR").replace("\u20ac","").replace(",","")),this.priceErrorMessage=""}catch(n){this.priceErrorMessage="Geen geldig bedrag"}}descriptionValueChanged(e){const n=e.target.value;0!==n.length?(this.updateProduct.description=n,this.descriptionErrorMessage=""):this.descriptionErrorMessage="Beschrijving kan niet leeg zijn"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(v.TA),t.Y36(s.H9),t.Y36(g.gz),t.Y36(f.Hw),t.Y36(x.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-details"]],decls:11,vars:6,consts:[[3,"fullscreen"],[1,"ion-no-border"],[1,"product-header"],["icon","","text","Terug",1,"go-back",3,"defaultHref"],[4,"ngIf"],[1,"product-page-content"],["class","product-information",4,"ngIf"],["class","header-edit-product",3,"textContent","click",4,"ngIf"],[1,"header-edit-product",3,"textContent","click"],["name","create-outline"],["name","close-outline"],[1,"product-information"],[1,"product-image"],[3,"src","alt"],[1,"bold-text"],["alt","Remove product image","class","remove-product","src","./assets/icon/cancel-icon.svg",3,"click",4,"ngIf"],["alt","Edit product image","class","edit-product","src","./assets/icon/edit-circle.svg",3,"click",4,"ngIf"],["class","image-upload-message",4,"ngIf"],["class","error-message",4,"ngIf"],[3,"fieldType","placeholder","name","value","onInputChange"],["placeholder","Beschrijving","name","description","rows","6","cols","20",3,"value","ionInput"],[1,"product-visibility"],[3,"click"],[1,"button",3,"checked","ionChange"],["visibility",""],[1,"save-button"],[3,"invertColor","buttonText","click"],["alt","Remove product image","src","./assets/icon/cancel-icon.svg",1,"remove-product",3,"click"],["alt","Edit product image","src","./assets/icon/edit-circle.svg",1,"edit-product",3,"click"],[1,"image-upload-message"],[1,"error-message"]],template:function(e,n){1&e&&(t.TgZ(0,"ion-content",0),t.TgZ(1,"ion-header",1),t.TgZ(2,"ion-toolbar"),t.TgZ(3,"div",2),t._UZ(4,"ion-back-button",3),t.TgZ(5,"h2"),t._uU(6),t.qZA(),t.YNc(7,b,3,2,"ion-buttons",4),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"div",5),t.YNc(9,D,4,3,"div",6),t.YNc(10,k,4,3,"div",6),t.qZA(),t.qZA()),2&e&&(t.Q6J("fullscreen",!0),t.xp6(4),t.s9C("defaultHref",n.currentRole===n.role.admin?"admin/products":"overview/orders/create"),t.xp6(2),t.Oqu(null!=n.product&&n.product.name?null==n.product?null:n.product.name:""),t.xp6(1),t.Q6J("ngIf",n.currentRole===n.role.admin),t.xp6(2),t.Q6J("ngIf",!n.edit),t.xp6(1),t.Q6J("ngIf",n.currentRole===n.role.admin&&n.edit))},directives:[d.W2,d.Gu,d.sr,d.oU,d.cs,s.O5,d.Sm,d.YG,d.gu,Z.q,d.g2,d.j9,d.Ie,d.Q$,d.ho,d.w,M.r],pipes:[s.H9],styles:["ion-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{font-size:.95rem;color:var(--color-app-primary)}ion-content[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .go-back[_ngcontent-%COMP%]{position:absolute;--color: var(--color-app-primary);margin-left:10px;text-transform:lowercase;font-size:1rem;font-weight:normal;text-decoration:none}ion-content[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;font-size:30px;text-align:center}ion-content[_ngcontent-%COMP%]   .product-header[_ngcontent-%COMP%]   .header-edit-product[_ngcontent-%COMP%]{position:absolute;right:10px;top:-45px;--color: var(--color-app-primary);text-transform:lowercase;font-size:1rem;font-weight:normal;text-decoration:none}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]{max-width:var(--list-width);margin-left:auto;margin-right:auto}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]{margin-left:15px;margin-right:15px}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .bold-text[_ngcontent-%COMP%]{margin-top:10px;font-weight:bold}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{margin-top:10px;background:var(--color-app-shade-white-1);border:1px solid var(--color-app-shade-white-2);box-sizing:border-box;border-radius:8px;--padding-start: 8px}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{text-align:center}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .image-upload-message[_ngcontent-%COMP%]{font-size:1.05rem;font-weight:bold;text-align:center}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .product-visibility[_ngcontent-%COMP%]{left:-10px;margin:15px auto auto}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]{text-align:center;width:100%}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:220px}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .edit-product[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;margin-top:75px;margin-left:calc(50% + 100px);margin-right:auto}ion-content[_ngcontent-%COMP%]   .product-page-content[_ngcontent-%COMP%]   .product-information[_ngcontent-%COMP%]   .product-image[_ngcontent-%COMP%]   .remove-product[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;margin-top:75px;margin-right:calc(50% + 100px);margin-left:auto}"]}),o})()}];let z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[g.Bz.forChild(H)],g.Bz]}),o})();var B=a(9861),F=a(7952);let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[s.H9],imports:[[s.ez,m.u5,d.Pc,z,B.r,F.h]]}),o})()}}]);